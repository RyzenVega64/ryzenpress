# JavaScript

## 内存泄漏 以及常见内存泄漏的原因和排查的方法

内存泄漏是指在程序运行过程中，由于错误的内存管理导致一部分已分配的内存无法被回收，从而造成内存资源的浪费。当内存泄漏发生时，程序会持续占用内存，导致系统性能下降，甚至可能导致程序崩溃。常见内存泄漏原因为闭包、定时器等原因，可以使用内存分析工具或浏览器日志监控排查内存泄漏问题。

## JS 动画与 CSS 动画区别

JS动画是由JS控制dom元素变化产生的逐帧动画,理论上它可以实现任何动画 ，但会造成阻塞进程容易引起性能问题。另外JS动画是控制dom元素的变化产生的,因此每次执行都会引起浏览的重绘,动画过于复杂会影响浏览器的性能

CSS动画是在样式表中定义的补帧动画,它只能按照预设的动作运行JS动画和CSS动画运行时 相较比JS动画 局限性会比较多 但CSS动画是在浏览器的渲染线程执行，的动画复杂不会影响主线程代码的执行

## WebSocket

websocket:是一个协议， 它提供了一个持久的、全双工的通信通道，允许客户端和服务器之间进行实时双向通信。与传统的 HTTP 不同，WebSocket 为数据交换提供了一个持续开放的连接，从而大大降低了延迟，使得数据可以即时地在两端之间传输。

持久连接：一旦建立，WebSocket 连接就会保持开放状态，允许数据在任何时候被发送或接收。

全双工：客户端和服务器都可以在任何时候发送数据，而不需要等待另一方的响应。

低延迟：由于连接始终开放，数据可以立即发送，无需重新建立连接。

更少的开销：与 HTTP 相比，WebSocket 头部信息的开销较小，这意味着它在传输少量数据时更为高效。

握手通过 HTTP：WebSocket 连接开始时使用标准的 HTTP 协议（通常是 HTTP/1.1），通过一个特殊的 "Upgrade" 请求从 HTTP 转换为 WebSocket。这使得 WebSocket 可以复用现有的 HTTP 基础设施和端口（如 80 和 443）。

安全性：与 HTTPS 类似，WebSocket 也有一个加密版本，称为 "WebSocket Secure" 或 "WSS"，它在传输层安全性 (TLS) 之上运行。
WebSocket 在许多现代 web 应用中都有应用，特别是需要实时功能的应用，如在线聊天、游戏、实时股票报价、体育比赛的实时得分、多人协作工具等。

## let 的临时性死区

在声明 let 、 const 变量之前 调用这个变量会报错。

```
console.log(a);  // 报错
let a = 10;
console.log(a);  // 输出 10
```

## JS 中的倒计时 实现纠正偏差

纯前端实现会因为各种原因（比如用户的电脑性能、网络延迟等）会存在偏差。

最佳的方式，是通过请求接口，向后端发送请求获取最新的时间差来校准倒计时。

## 堆与栈的区别

内存分配方式：堆内存为动态分配，栈内存为静态分配

内存大小：堆内存大小不固定，可动态增加与减少，而栈内存大小是固定的

内存访问方式：堆内存通过指针来访问，栈内存是按照先进后出地方式来访问

内存存储内容：堆内存主要用于存储对象、数组等动态数据结构（复杂数据类型）

栈内存主要用于存储函数调用时的临时变量、函数参数等（基本数据类型）

内存释放方式：堆内存的释放许需要手动进行，如程序员手动控制等

而栈内存的释放则是由编译器自动进行的
